{"pageProps":{"title":"Introduction fetch API - the new AJAX","description":"The Fetch API provides an interface for fetching resources (e.g., across the network.) It will seem familiar to anyone who has used XMLHttpRequest, but the new API provides a more powerful and flexible feature set.","date":"2015-06-07T16:08:56.339Z","lastmod":"2015-06-07T16:12:00.602Z","slug":"introduction-fetch-api-the-new-ajax","categories":["Web-Development","Development"],"tags":["JavaScript"],"thumbnail":"https://2.bp.blogspot.com/-k0RYC7NXty4/WhDKfhg_TnI/AAAAAAAAD20/4PH54d0axJEQkfOHzsnKaFAnjvpOVFMrwCLcBGAs/s400/1433693516339_zpsor3v2pza.png","image":"https://2.bp.blogspot.com/-k0RYC7NXty4/WhDKfhg_TnI/AAAAAAAAD20/4PH54d0axJEQkfOHzsnKaFAnjvpOVFMrwCLcBGAs/s1600/1433693516339_zpsor3v2pza.png","source":"","content":"\n\nFetch provides a generic definition of [Request](https://developer.mozilla.org/en-US/docs/Web/API/Request) and [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response) objects. This will allow them to be used whether it’s for service workers, Cache API and other similar things that handle or modify requests and responses, or any kind of use case that might require you to generate your own responses programmatically. It also provides a definition for related concepts such as CORS and the HTTP origin header semantics, supplanting their separate definitions elsewhere. \n\nfetch() allows you to make network requests similar to XMLHttpRequest (XHR). The main difference is that the Fetch API uses Promises, which enables a simpler and cleaner API, avoiding callback hell and having to remember the complex API of XMLHttpRequest.\n\n## Basic Fetch Request\n\nA fetch function is now provided in the global window scope, with the first argument being the URL:\n\n    // url (required), options (optional)\n    fetch('/some/url').then(function(response) {\n    \t// todo\n    }).catch(function(err) {\n    \t// Error :(\n    });\n\n## Handling JSON\n\nLet's say your service gets JSON as response, the resulting callback data has a `json` method for converting the raw data to a JavaScript object:\n\n    fetch('/some/url/json')\n    .then(function(response) { \n    \t// Convert to JSON\n    \treturn response.json();\n    }).then(function(j) {\n    \t// a JavaScript object\n    \tconsole.log(j); \n    });\n\n## Handling Basic Text Responses\n\nLet's say your service gets HTML template as response, so here's how you can work with an HTML or text response:\n\n    fetch('/some/url')\n    .then(function(response) { \n    \t// Convert to text\n    \treturn response.text();\n    }).then(function(txt) {\n    \t// String\n    \tconsole.log(txt); \n    });\n\nYou can get the response text via chaining the Promise's `then` method along with the `text()` method(`response.text()` returns Promise object).\n\n## Headers and Metadata\n\nResponse headers and metadata are available on the response object via straight properties and a get method for headers are illustrated below:\n\n    fetch('/some/url')\n    .then(function(response) {  \n        console.log(response.headers.get('Content-Type'));  \n        console.log(response.headers.get('Date'));\n\n        console.log(response.status);  \n        console.log(response.statusText);  \n        console.log(response.type);  \n        console.log(response.url);  \n    });\n\nYou can also set headers in your initial request but you cannot set cookies:\n\n    // url (required), options (optional)\n    fetch('/some/url', {\n    \theaders: {\n    \t\t'Accept': 'application/json',\n        \t'Content-Type': 'application/json'\n    \t}\n    });\n\n## POST Form Data\n\nAnother common use case for AJAX is sending form data. To do this we can set the method and `body` parameters in the `fetch()` options.\n\n    fetch('/some/url', {  \n      method: 'post',  \n      headers: {  \n        \"Content-type\": \"application/x-www-form-urlencoded\"  \n      },  \n      body: 'a=1&b=2'\n    })\n    .then(function(res){\n      return res.json();\n    })\n    .then(function (data) {  \n      console.log('Request succeeded with JSON response', data);  \n    })\n    .catch(function (error) {  \n      console.log('Request failed', error);  \n    });\n\n## Sending Credentials with a Fetch Request\n\nShould you want to make a fetch request with credentials such as cookies, you should set the credentials of the request to “`include`”.\n\n    fetch('/some/url', {  \n      credentials: 'include'  \n    })\n\nMore about [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)","permalink":"/post/introduction-fetch-api-the-new-ajax","site":{"categories":[{"name":"Algorithm","count":1},{"name":"Design","count":10},{"name":"Development","count":37},{"name":"Interview","count":1},{"name":"Mobile-Development","count":1},{"name":"Resources","count":14},{"name":"System Design","count":1},{"name":"Tools","count":1},{"name":"Web Management","count":5},{"name":"Web-Development","count":36}],"tags":[{"name":".NET","count":2},{"name":"Algorithm","count":1},{"name":"AngularJS","count":4},{"name":"CSS","count":6},{"name":"HTML","count":3},{"name":"Interview","count":2},{"name":"JavaScript","count":26},{"name":"Mobile","count":1},{"name":"Node.JS","count":8},{"name":"React","count":1},{"name":"Tools","count":1}]}},"__N_SSG":true}